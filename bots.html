<!doctype html>
<html>
<head>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta charset='utf8'>
    <title>SeoLog</title>
    <link rel="stylesheet" href="css/materialize.min.css"> 
    <link rel="stylesheet" href="css/geeky-log.css"> 
</head>
<body>
  
    <nav>
        <div class="nav-wrapper">
          <b id="logo">GeekyLog</b>
          <ul id="nav-mobile" class="right hide-on-med-and-down">
          </ul>
        </div>
    </nav> 
    
    <h2>Bots</h2> 
    
    <div class='table'>
        <h3>Googlebot Search <i>commas in UA field were removed</i></h3>
        <div id="gbot-search"></div>
    </div> 
    
    <div class='table'>
        <h3>All Googlebot <i>commas in UA field were removed</i></h3>
        <div id="gbot"></div>
    </div> 
    
    <div class='table'>
        <h3>All bots <i>commas in UA field were removed</i></h3>
        <div id="bot"></div>
    </div> 
    
    <div class='table'>
        <h3>Googlebot Search verifyed IPs</h3>
        <div id="gBotSearchIPs"></div>
    </div> 
    
    <div class='table'>
        <h3>Googlebot Search NOT verifyed IPs <i>you should consider blocking for save server's ressources</i></h3>
        <div id="fakeGbotIPs"></div>
    </div> 
    
    <p></p>    
    <footer class="page-footer">
        <div class="container">
            <div class="row">
                <div class="col l6 s12">
                    <h5 class="white-text">GeekyLog</h5>
                    <p class="grey-text text-lighten-4">Data Mining : Linux commands</br>Data visualization : d3js + materializecss<br>All data is available in CSV</p>
                </div>
                <div class="col l4 offset-l2 s12">
                    <h5 class="white-text">Links</h5>
                    <ul>                        
                        <li><a class="grey-text text-lighten-3" href="https://github.com/VictorVila/GeekyLog">Github</a></li>
                        <li><a class="grey-text text-lighten-3" href="https://twitter.com/tiropcom">@tiropcom</a></li>
                        <li><a class="grey-text text-lighten-3" href="http://www.tirop.com/">http://www.tirop.com/</a></li>
                    </ul>
              </div>
            </div>
          </div>
          <div class="footer-copyright">
            <div class="container">
                Free Open source 
                <a class="grey-text text-lighten-4 right" href="https://github.com/VictorVila/GeekyLog/blob/master/LICENSE">GNU GPL v3.0</a>
            </div>
        </div>
    </footer>
    <script src="js/d3.v4.min.js"></script>
    <script src="js/geeky-log.js"></script>
    <script> 
    createTable( "gbot-search", "ua-gbot-search.csv", "User Agent", 50 );
    createTable( "gbot", "ua-gbot.csv", "User Agent", 50 );
    createTable( "bot", "ua-bot.csv", "User Agent", 50 );
    createDataLink( "gBotSearchIPs", "okIps.csv");
    createDataLink( "fakeGbotIPs", "fakeGbotIPs.csv");
    
    
    var stats = d3.json('logs/' + directory + "/global.json", function(error, data) 
    {
        console.log('data '+data.totalHits)
        document.getElementById('totalHits').innerHTML = data.totalHits;
        document.getElementById('botsHits').innerHTML = data.botsHits;
        document.getElementById('googleBotsHits').innerHTML = data.googleBotsHits;
        document.getElementById('googleSearchHits').innerHTML = data.googleSearchHits;
    });


/*

cat -v allLogs.log | awk '$1~"^[0-9]{1,3}." {print $12$13$14}' | grep -E -i "spider|crawler|bot" | less

*/
    </script>
</body>
</html>
